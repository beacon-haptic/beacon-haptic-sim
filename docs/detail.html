<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>商品詳細</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/Proc_detail_style.css">

  <script type="module">
    import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAHiMCeiOFN-R4EoLTiBpeJWIUQYIrUA5M",
      authDomain: "beacon-haptic-sim.firebaseapp.com",
      projectId: "beacon-haptic-sim",
      storageBucket: "beacon-haptic-sim.appspot.com",
      messagingSenderId: "699174750938",
      appId: "1:699174750938:web:1ade40d8ef1a30c9c0b3e3",
      measurementId: "G-4QX9T79SL7"
    };

    const app = getApps().length ? getApp() : initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // URLのクエリパラメータからidを取得
    const params = new URLSearchParams(window.location.search);
    const id = params.get('id');

    async function loadProduct() {
      if (!id) {
        document.getElementById('content').textContent = "商品IDが指定されていません。";
        return;
      }

      const docRef = doc(db, "products", id);
      const docSnap = await getDoc(docRef);

      if (docSnap.exists()) {
        const data = docSnap.data();
        document.getElementById('name').textContent = data.name || "";
        document.getElementById('category').textContent = data.category || "";
        document.getElementById('detail').textContent = data.detail || "";
        if(data.image){
          document.getElementById('image').src = data.image;
          document.getElementById('image').alt = data.name;
        }
      } else {
        document.getElementById('content').textContent = "該当する商品が見つかりませんでした。";
      }
    }

    window.onload = loadProduct;
  </script>
</head>
<body>
  <header>
      <h1>商品情報</h1>
      <button id="menu-toggle" class="hamburger">☰</button>
      <nav id="sidebar" class="sidebar">
       <ul>
        <li><a href="index.html">ホーム</a></li>
        <li><a href="itirann.html">商品一覧</a></li>
        <li><a href="#">メニュー2</a></li>
        <li><a href="#">メニュー3</a></li>
       </ul>
      </nav>
  </header>
  <h2>
    <p id="name"></p>
    <p><strong>カテゴリ:</strong> <span id="category"></span></p>
    <img id="image" src="" alt="" style="max-width:300px;">
    <p><strong>商品説明:</strong> <span id="detail"></span></p>
    <p id="content"></p>
    <div class="product-page">

    <div class="product-main">
      <div class="product-images">
        <img src="main.jpg" alt="商品メイン画像" class="main-image">
        <div class="thumbnail-list">
          <img src="thumb1.jpg" alt="">
          <img src="thumb2.jpg" alt="">
          <img src="thumb3.jpg" alt="">
          <img src="thumb4.jpg" alt="">
        </div>
      </div>

      <div class="product-info">
        <h1 class="product-name" id="name">商品名</h1>
        <p class="product-price"></p>
        <p class="catch-copy">キャッチコピー（ベネフィット訴求）</p>
        <button class="buy-button">カートに入れる</button>

        <ul class="info-links">
          <li><a href="#">返品について</a></li>
          <li><a href="#">特定商取引法に基づく表記</a></li>
          <li><a href="#">商品に関するお問い合わせ</a></li>
        </ul>
      </div>
    </div>

    <div class="product-detail">
      <h2>商品説明・詳細</h2>
      <p>ここに商品の詳細説明を記載します。</p>
    </div>

    <div class="product-review">
      <h2>商品レビュー</h2>
      <p>レビューがここに表示されます。</p>
    </div>

    <div class="related-products">
      <h2>関連商品（一緒に購入されている商品など）</h2>
      <p>関連商品のリストをここに表示。</p>
    </div>

  </div>
  </h2>
  <script>
      document.getElementById('menu-toggle').addEventListener('click', function () {
        const sidebar = document.getElementById('sidebar');
        const toggleButton = document.getElementById('menu-toggle');

        sidebar.classList.toggle('active');
        toggleButton.classList.toggle('no-border');
      });
  </script>
</body>
</html>
