<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>商品一覧ページ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="css/Proc_itirann_style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
   <header>
    <h1>商品一覧</h1>
    <button id="menu-toggle" class="hamburger">☰</button>
      <nav id="sidebar" class="sidebar">
       <ul>
        <li><a href="index.html">ホーム</a></li>
        <li><a href="itirann.html">商品一覧</a></li>
        <li><a href="#">お気に入り</a></li>
        <li><a href="#">メニュー3</a></li>
       </ul>
      </nav>      
   </header> 
   <div class="back-color">
   <main class="container mt-4">
     <div id="product-list" class="row g-4">
      <!-- Firebaseから取得した商品がここに表示される -->
     </div>
   </main>
   </div>
   <script>
      document.getElementById('menu-toggle').addEventListener('click', function () {
        const sidebar = document.getElementById('sidebar');
        const toggleButton = document.getElementById('menu-toggle');

        sidebar.classList.toggle('active');
        toggleButton.classList.toggle('no-border');
      });
   </script>
<!-- Firebase互換版 -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
<script>
  const firebaseConfig = {
      apiKey: "AIzaSyAHiMCeiOFN-R4EoLTiBpeJWIUQYIrUA5M",
      authDomain: "beacon-haptic-sim.firebaseapp.com",
      projectId: "beacon-haptic-sim",
      storageBucket: "beacon-haptic-sim.appspot.com",
      messagingSenderId: "699174750938",
      appId: "1:699174750938:web:1ade40d8ef1a30c9c0b3e3",
      measurementId: "G-4QX9T79SL7"
  };

  // Firebase初期化（互換版）
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Firestoreから商品を取得してHTMLに追加
  async function loadProducts() {
    const productContainer = document.getElementById("product-list");
    productContainer.innerHTML = "";

    const snapshot = await db.collection("products").get();

    let products = [];

    snapshot.forEach(doc => {
      products.push({
        id: doc.id,
        ...doc.data()
      });
    });

    // ▼ 五十音順（商品名の昇順）に並び替え
    products.sort((a, b) => {
      return a.name.localeCompare(b.name, 'ja'); // ← 日本語対応
    });

    // ▼ 並び替えた順に表示
    products.forEach(product => {
      const card = document.createElement("div");
      card.className = "col-md-6";
      card.innerHTML = `
        <div class="product-card">
          <img src="${product.image}" alt="${product.name}">
          <h5>${product.name}</h5>
        </div>
      `;
      card.querySelector('.product-card').addEventListener('click', () => {
        location.href = `detail.html?id=${product.id}`;
      });

      productContainer.appendChild(card);
    });
  }


  window.addEventListener("DOMContentLoaded", loadProducts);
</script>

</body>