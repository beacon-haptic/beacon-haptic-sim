<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Firestore ãƒ‡ãƒ¼ã‚¿ç¢ºèª</title>
</head>
<body>
  <h1>Firestore ã®ãƒ‡ãƒ¼ã‚¿ç¢ºèª</h1>
  <p>ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®ã€Œã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã€ã‚’é–‹ã„ã¦ãã ã•ã„ã€‚</p>

<script type="module">
  import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

  console.log("âš™ï¸ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿é–‹å§‹");

  const firebaseConfig = {
    apiKey: "...",
    authDomain: "...",
    projectId: "...",
    storageBucket: "...",
    messagingSenderId: "...",
    appId: "...",
    measurementId: "..."
  };

  const app = getApps().length ? getApp() : initializeApp(firebaseConfig);
  console.log("âœ… Firebase åˆæœŸåŒ–æ¸ˆã¿");

  const db = getFirestore(app);
  console.log("ğŸ“– Firestore ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å–å¾—");

  async function checkData() {
    console.log("ğŸ” checkData å‘¼ã³å‡ºã—");

    try {
      const colRef = collection(db, "items");
      console.log("ğŸ“‚ ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å‚ç…§å–å¾—:", colRef);

      const snapshot = await getDocs(colRef);
      console.log("ğŸ“¦ getDocs å®Ÿè¡Œå¾Œ snapshot:", snapshot);

      if (snapshot.empty) {
        console.log("ğŸ“­ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“");
        return;
      }

      snapshot.forEach(doc => {
        console.log("ID:", doc.id, "| ãƒ‡ãƒ¼ã‚¿:", doc.data());
      });
    } catch (error) {
      console.error("â— Firestore èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:", error);
    }
  }

  checkData();
</script>