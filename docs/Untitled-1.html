<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Firestore データ確認</title>
</head>
<body>
  <h1>Firestore のデータ確認</h1>
  <p>ブラウザの開発者ツールの「コンソール」を開いてください。</p>

<script type="module">
  import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

  console.log("⚙️ モジュールスクリプト読み込み開始");

  const firebaseConfig = {
    apiKey: "...",
    authDomain: "...",
    projectId: "...",
    storageBucket: "...",
    messagingSenderId: "...",
    appId: "...",
    measurementId: "..."
  };

  const app = getApps().length ? getApp() : initializeApp(firebaseConfig);
  console.log("✅ Firebase 初期化済み");

  const db = getFirestore(app);
  console.log("📖 Firestore インスタンス取得");

  async function checkData() {
    console.log("🔍 checkData 呼び出し");

    try {
      const colRef = collection(db, "items");
      console.log("📂 コレクション参照取得:", colRef);

      const snapshot = await getDocs(colRef);
      console.log("📦 getDocs 実行後 snapshot:", snapshot);

      if (snapshot.empty) {
        console.log("📭 ドキュメントがありません");
        return;
      }

      snapshot.forEach(doc => {
        console.log("ID:", doc.id, "| データ:", doc.data());
      });
    } catch (error) {
      console.error("❗ Firestore 読み込みエラー:", error);
    }
  }

  checkData();
</script>